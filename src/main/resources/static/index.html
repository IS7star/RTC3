<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    
	<link rel="stylesheet" type="text/css" href="css/common.css">
	<title>気分選択画面</title>
</head>

<body>
<br>	

<div id="navArea">
	
  <nav>
    <div class="inner">
      <ul>
        <li><a href="/ShowRecommendReshipi?menuCd=126">料理研究家(K・K)のイチオシレシピ</a></li>
        <li><a href="/ShowRecommendReshipi?menuCd=127">料理研究家(T・M)のイチオシレシピ</a></li>
        <li><a href="/ShowRecommendReshipi?menuCd=128">料理研究家(I・S)のイチオシレシピ</a></li>
        <li><a href="/ShowRecommendReshipi?menuCd=129">料理研究家(T・H)のイチオシレシピ</a></li>
        <li><a href="/ShowRecommendReshipi?menuCd=130">料理研究家(T・N)のイチオシレシピ</a></li>
      </ul>
    </div>
  </nav>

  <div class="toggle_btn">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <div id="mask"></div>

</div>


	<div style="text-align: center;">
		<h1 id="midashi">献立提案サービス</h1>
		<div class="tab-wrap">
			<input id="tab01" type="radio" name="tab" class="tab-switch" checked="checked">
			<label class="tab-label" for="tab01">気分で選ぶ</label>
			<div class="tab-content" id="back">

				<!--気分選択による献立提案-->
				<h6>気分に合わせた献立を提案するよ</h6>

				<div class="pc-content">
					<div class="container d-none d-sm-block">
						<div class="row">
							<div class="col-lg-4 col-sm-6">
								<h5>がっつり</h5>
								<a href="/SearchReshipi?moodCd=1" class="button" alt="がっつり">
									<span id="buttonImage1"></span></a>
							</div>
							<div class="col-lg-4 col-sm-6">
								<h5>あっさり</h5>
								<a href="/SearchReshipi?moodCd=2" class="button" alt="あっさり">
									<span id="buttonImage2"></span></a>
							</div>
							<div class="col-lg-4 col-sm-6">
								<h5>お子様向け</h5>
								<a href="/SearchReshipi?moodCd=3" class="button" alt="お子様向け">
									<span id="buttonImage3"></span></a>
							</div>
							<div class="col-lg-4 col-sm-6">
								<h5>おしゃれ</h5>
								<a href="/SearchReshipi?moodCd=4" class="button" alt="おしゃれ">
									<span id="buttonImage4"></span></a>
							</div>
							<div class="col-lg-4 col-sm-6">
								<h5>時短メニュー</h5>
								<a href="/SearchReshipi?moodCd=5" class="button" alt="時短メニュー">
									<span id="buttonImage5"></span></a>
							</div>
							<div class="col-lg-4 col-sm-6">
								<h5>ダイエットメニュー</h5>
								<a href="/SearchReshipi?moodCd=6" class="button" alt="ダイエットメニュー">
									<span id="buttonImage6"></span></a>
							</div>
						</div>
					</div>
				</div>


				<!-- スマホ画面対応のカルーセル表記 -->
				<div style="text-align: center;">
					<div class="mobile-content">
						<div id="image-carousel" class="carousel slide" data-ride="carousel">
							<!-- カルーセルインジケーター -->
							<ol class="carousel-indicators">
								<li data-target="#image-carousel" data-slide-to="0" class="active"></li>
								<li data-target="#image-carousel" data-slide-to="1"></li>
								<li data-target="#image-carousel" data-slide-to="2"></li>
								<li data-target="#image-carousel" data-slide-to="3"></li>
								<li data-target="#image-carousel" data-slide-to="4"></li>
								<li data-target="#image-carousel" data-slide-to="5"></li>
							</ol>

							<!-- カルーセル内のコンテンツ -->
							<div class="carousel-inner">
								<div class="carousel-item active">
									<a href="/SearchReshipi?moodCd=1" class="btn name" alt="がっつり">がっつり
										<span id="buttonImage1-sumaho"></span></a>
								</div>
								<div class="carousel-item">
									<a href="/SearchReshipi?moodCd=2" class="btn name" alt="あっさり">あっさり
										<span id="buttonImage2-sumaho"></span></a>
								</div>
								<div class="carousel-item">
									<a href="/SearchReshipi?moodCd=3" class="btn name" alt="お子様向け">お子様向け
										<span id="buttonImage3-sumaho"></span></a>
								</div>
								<div class="carousel-item">
									<a href="/SearchReshipi?moodCd=4" class="btn name" alt="おしゃれ">おしゃれ
										<span id="buttonImage4-sumaho"></span></a>
								</div>
								<div class="carousel-item">
									<a href="/SearchReshipi?moodCd=5" class="btn name" alt="時短メニュー">時短メニュー
										<span id="buttonImage5-sumaho"></span></a>
								</div>
								<div class="carousel-item">
									<a href="/SearchReshipi?moodCd=6" class="btn name" alt="ダイエットメニュー">ダイエットメニュー
										<span id="buttonImage6-sumaho"></span></a>
								</div>
							</div>
							<a class="carousel-control-prev" href="#image-carousel" role="button" data-slide="prev">
								<span class="carousel-control-prev-icon" aria-hidden="true"></span>
								<span class="sr-only">Previous</span>
							</a>
							<a class="carousel-control-next" href="#image-carousel" role="button" data-slide="next">
								<span class="carousel-control-next-icon" aria-hidden="true"></span>
								<span class="sr-only">Next</span>
							</a>
						</div>
					</div>
				</div>
			</div>
			<input id="tab02" type="radio" name="tab" class="tab-switch">
			<label class="tab-label" for="tab02">感情分析で選ぶ</label>
			<div class="tab-content">

				<!--感情分析による献立提案-->
				<h6>感情分析結果から<br>お勧めの献立をいくつか提案するよ</h6>
				<input type="text/css" placeholder="例：551の豚まんがあるとき！" class="form-control control" id="inputText"
					maxlength="20" required autocomplete="off" /><br>
				<button id="submit1" onclick="fetchData()" name="my_submit" class="my_submit_btn"
					value="signup">送信</button>
				<br><br><br><br>

				<h6>感情分析結果から<br>お勧めの献立を1つ提案するよ</h6>
				<input type="text/css" placeholder="例：疲れを癒してほしい気分" class="form-control control" id="inputText2"
					maxlength="20" required autocomplete="off" /><br>
				<button id="submit2" onclick="fetchData2()" name="my_submit" class="my_submit_btn"
					value="signup">送信</button>
				<br><br>
			</div>

		</div>

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
	  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
	  </script>
	  
	  
	  <script>
  $(document).ready(function() {
    $('#image-carousel').carousel({
      interval: 150, // スライドの間隔（ミリ秒）
      swipe: 50 // スワイプの速度（ピクセル/秒）
    });
  });
</script>
		<script>
			//ナビゲーション
		(function($) {
			var $nav   = $('#navArea');
			var $btn   = $('.toggle_btn');
			var $mask  = $('#mask');
			var open   = 'open'; // class
			// menu open close
			$btn.on( 'click', function() {
				if ( ! $nav.hasClass( open ) ) {
					$nav.addClass( open );
					} else {
						$nav.removeClass( open );
						}
				});
			// mask close
			$mask.on('click', function() {
			$nav.removeClass( open );
			});
		} )(jQuery);
		

		
			//必須入力チェック処理
			const inputText = document.getElementById("inputText")
			const button = document.getElementById("submit1")

			button.disabled = true;
			button.classList.add('is-inactive');

			inputText.addEventListener("input", update)
			inputText.addEventListener("change", update)

			function update() {

				const isRequired = inputText.checkValidity()


				if (isRequired) {
					button.disabled = false;
					button.classList.remove('is-inactive');
					button.classList.add('is-active');
					return
				} else {
					button.disabled = true;
					button.classList.remove('is-active');
					button.classList.add('is-inactive');
				}


			}

			const button2 = document.getElementById("submit2")
			const inputText2 = document.getElementById("inputText2")

			button2.disabled = true;
			button2.classList.add('is-inactive');

			inputText2.addEventListener("input", update2)
			inputText2.addEventListener("change", update2)

			function update2() {

				const isRequired2 = inputText2.checkValidity();

				if (isRequired2) {
					button2.disabled = false;
					button2.classList.remove('is-inactive');
					button2.classList.add('is-active');
					return
				} else {
					button2.disabled = true;
					button2.classList.remove('is-active');
					button2.classList.add('is-inactive');
				}
			}
			function fetchData() {
				var inputText = document.getElementById("inputText").value;
				const data = {
					kind: "SentimentAnalysis",
					parameters: {
						modelVersion: "latest",
						opinionMining: "False"
					},
					analysisInput: {
						documents: [
							{
								id: "1",
								language: "ja",
								text: inputText
							}
						]
					}
				};
				// HTMLのボタン要素にイベントリスナーを追加する
				const button = document.querySelector('button');
				button.addEventListener('click', fetchData);

				fetch('https://test20230629abe.cognitiveservices.azure.com/language/:analyze-text?api-version=2023-04-01', {
					method: 'POST',
					headers: {
						'Ocp-Apim-Subscription-Key': 'c60a6b97f8f444d4ae314ae621a08862',
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(data)
				})
					.then(response => response.json())
					.then(data => {
						const valueToPost = data.results.documents[0].sentiment;

						const form = document.createElement('form');
						form.action = '/emotionInput'; // POSTリクエストを送信するURL
						form.method = 'POST';

						const input = document.createElement('input');
						input.type = 'hidden';
						input.name = 'emotion'; // POSTデータのキー
						input.value = valueToPost; // POSTデータの値


						form.appendChild(input);
						document.body.appendChild(form);
						form.submit(); // フォームを自動的に送信（submit）する		
					})
					.catch(error => {
						console.log(data);
					});
			}

			function fetchData2() {
				var inputText = document.getElementById("inputText2").value;
				const data = {
					kind: "SentimentAnalysis",
					parameters: {
						modelVersion: "latest",
						opinionMining: "False"
					},
					analysisInput: {
						documents: [
							{
								id: "1",
								language: "ja",
								text: inputText
							}
						]
					}
				};
				// HTMLのボタン要素にイベントリスナーを追加する
				const button = document.querySelector('button');
				button.addEventListener('click', fetchData2);

				fetch('https://test20230629abe.cognitiveservices.azure.com/language/:analyze-text?api-version=2023-04-01', {
					method: 'POST',
					headers: {
						'Ocp-Apim-Subscription-Key': 'c60a6b97f8f444d4ae314ae621a08862',
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(data)
				})
					.then(response => response.json())
					.then(data => {
						const valueToPost = data.results.documents[0].sentiment;

						const form = document.createElement('form');
						form.action = '/emotionSerch'; // POSTリクエストを送信するURL
						form.method = 'POST';

						const input = document.createElement('input');
						input.type = 'hidden';
						input.name = 'emotion'; // POSTデータのキー
						input.value = valueToPost; // POSTデータの値


						form.appendChild(input);
						document.body.appendChild(form);
						form.submit(); // フォームを自動的に送信（submit）する		
					})
					.catch(error => {
						console.log(data);
					})
			}
		</script>

</body>

</html>
